## 1. TCP/IP的分层管理
1. 应用层：决定了向用户提供应用服务时通信的活动;（FTP文件传输协议、DNS域名系统、HTTP）
2. 传输层：对应用层，提供处于网络连接中的两台计算机之间的数据传输；（TCP传输控制协议、UDP用户数据报协议）
3. 网络层：用来处理在网络上流动的数据包。数据包是网络传输的最小数据单位。该层规定了通过怎样的路径（所谓的传输路线）到达对方计算机，并把数据包传送给对方。与对方计算机之间通过多台计算机或网络设备进行传输时，网络层的作用是在众多的选项内选择一条传输路线。（IP协议）
4. 链路层：用来处理网络的硬件部分。硬件上的范畴均在链路层的作用范围之内。 

## 2. TCP/IP通信传输流
![](https://user-gold-cdn.xitu.io/2019/7/5/16bc0f97162b3474?w=749&h=657&f=png&s=307808)
> 1. 传输层（TCP协议）把从应用层收到的数据（HTTP请求报文）进行分割，并在各个报文上打上标记序号及端口号后转发给网络层。
> 2. 在网络层（IP协议），增加作为通信目的地的MAC地址后转发给链路层。

发送端在层与层之间传输数据时，每经过一层时必定会被打上一个该层所属的头部信息。即**封装**。

## 3. IP协议
> IP协议的作用是把各种数据包传送给对方。而要保证确实传送到对方那里，需要满足各类条件。最重要的两个条件是IP地址和MAC地址。IP地址指明了节点被分配到的地址，MAC地址是指网卡所属的固定地址。IP地址可以和MAC地址进行配对。IP地址可变换，MAC地址基本不会更改。使用ARP协议凭借MAC地址进行通信。ARP是一种用以解析地址的协议，更具通信方的IP地址就可以反查出对应的MAC地址。

## 4. TCP协议
> TCP位于传输层，提供可靠的字节流服务。所谓的字节流服务是指，为了方便传输，将大块数据分割成以报文段为单位的数据包进行管理。可靠的传输服务是指，能够把数据可靠的传输给对方。TCP协议为了更容易传送大数据才把数据分割，而且TCP协议能够确认数据最终是否送达对方。

## 5. 三次握手
> 发送端先发送一个带SYN标志的数据包给对方。接收端收到后，回传一个带有SYN/ACK标志的数据包以示传达确认信息。最后，发送端再回传一个带ACK标志的数据包，代表“握手”结束。

![](https://user-gold-cdn.xitu.io/2019/7/5/16bc0f9716823422?w=746&h=406&f=png&s=233553)

## 6. DNS服务
> DNS协议提供通过域名查找IP地址，或逆向从IP地址反查域名的服务。

## 7. 各种协议与HTTP协议的关系
![](https://user-gold-cdn.xitu.io/2019/7/5/16bc0f9716aeff24?w=673&h=940&f=png&s=477244)

## 8. HTTP协议
> HTTP是不保存状态，即无状态协议。HTTP协议自身不对请求和响应之间的通信状态进行保存，即协议对于发送过的请求或响应不做持久化处理。<br><br> 使用HTTP协议，每当有新的请求发送时，就会有对应的新响应产生。协议本身不保留之前一切的请求或响应报文的信息。这是为了更快地处理大量事务，确保协议的可伸缩性。

### Cookie技术
> Cookie技术通过在请求和响应报文中写入Cookie信息来控制客户端的状态。<br><br> Cookie会根据从服务器发送的响应报文内的一个叫做Set-Cookie的首部字段信息，通知客户端保存Cookie。当下次客户端再往该服务器发送请求时，客户端会自动再请求报文中加入Cookie值后发送出去。<br><br> 服务器发现客户端发送过来的Cookie后，会检查究竟是从哪一个客户端发来的连接请求，然后对比服务器上的记录，最后得到之前的状态信息。

![](https://i.loli.net/2019/07/05/5d1f446b0d7c932264.png)

![](https://user-gold-cdn.xitu.io/2019/7/5/16bc102d11f18590?w=651&h=485&f=png&s=88778)

HTTP支持的方法（**8种**）
* **GET**：获取资源
* **POST**：传输实体主体
* **PUT**：传输文件
* **HEAD**：获得报文首部
* **DELETE**：删除文件
* **OPTION**:询问支持的方法
* **TRACE**：追踪路径
* **CONNECT**：要求用隧道协议连接代理。CONNECT方法要求在与代理服务器通信时建立隧道，实现用隧道协议进行TCP通信，主要使用SSL（安全套接层）和TSL（传输层安全）协议把通信内容加密后经网络隧道传输。

## 9. HTTP缺点
* 通信使用明文（不加密），内容可能会被窃听
* 不验证通信方的身份，因此有可能遭遇伪装
* 无法验证报文的完整性，所以有可能已遭篡改
---
* **TCP/IP**是可能被窃听的网络
* 加密处理防止被窃听
> 1. 通信的加密<br>HTTP通过和SSL（Secure Socket Layer，安全套接层）或TLS（Transporst Layer Security，安全传输协议）的组合使用，加密HTTP的通信内容。<br>**与SSL组合使用的HTTP被称为HTTPS。**
> 2. 内容的加密 <br>
把HTTP报文里所含的内容本身进行加密

虽然使用HTTP协议无法确定通信方，但如果使用SSL就可以。SSL不仅提供加密处理，还使用了证书。证书由值得信任的第三方机构颁发，用以证明服务器和客户端是实际存在的。

### 如何防止篡改
> 常用的是**MD5**和**SHA-1**等散列值校验的方法，以及用来确认文件的数字签名方法。

## 10. HTTP+加密+认证+完整性保护=HTTPS
> 添加了加密及认证机制的HTTP成为HTTPS。HTTPS并非是应用层的一种新协议，只是HTTP通信接口部分用SSL和TSL协议代替而已。

> 通常，HTTP直接和TCP通信。当使用SSL时，则演变成先和SSL通信，再由SSL和TCP通信。

![](https://user-gold-cdn.xitu.io/2019/7/5/16bc2028cbe0296a?w=648&h=256&f=png&s=41348)

**SSL是当今世界上应用最为广泛的网络安全技术**

## 11. 相互交换密钥的公开密钥加密技术
SSL采用一种叫做**公开密钥加密**的加密处理方式

* **共享密钥**加密的困境（对称加密）

![](https://user-gold-cdn.xitu.io/2019/7/5/16bc20a2334730d6?w=580&h=402&f=png&s=146679)

* 使用两把密钥的**公开密钥**加密（不对称加密）
> 公开密钥加密使用一对非对称的密钥。一把叫私钥，一把叫公钥。私钥不能让其他任何人知道，公钥可以随意发布。<br><br>使用公开密钥加密方式，发送密文的一方使用对方的公开密钥进行加密处理，对方收到被加密的信息后，再使用自己的私钥进行解密。利用这种方式，不需要发送用来解密的私钥，也不必担心密钥被攻击者窃听而盗走。

![](https://i.loli.net/2019/07/05/5d1f4383cb36d23785.png)

* HTTPS采用混合加密方式

> HTTPS采用共享密钥加密和公开密钥加密两者并用的混合加密模式。若密钥能够实现安全交换，那么有可能会考虑使用公开密钥加密的方式。公开密钥加密与共享密钥加密相比，其处理速度要慢。<br><br>可以利用两者各自的优势，将多种方法组合起来用于通信。**在交换密钥环节使用公开密钥加密方式，之后的建立通信交换报文阶段则使用共享密钥加密方式**

![](https://i.loli.net/2019/07/05/5d1f429a6388654378.png)

## 12. SSL和TSL
> TSL是以SSL为原型开发的协议。TSL时SSL v3.0的升级版

## 13. HTTPS比HTTP要慢2到100倍

## 14. 为什么不一直使用HTTPS
> 与纯文本通信相比，加密通信会消耗更多的CPU及内存资源。因此，除非是非敏感信息则使用HTTP通信，只有包含个人信息等敏感数据时，才利用HTTPS加密通信。除此之外，想要节约购买证书的开销也是原因之一。

## 15. Session管理及Cookie应用
![](https://user-gold-cdn.xitu.io/2019/7/5/16bc236096414010?w=690&h=346&f=png&s=189172)

## 16. URI和URL的区别

> **URI**的三个组成部分  例子：file://a:1234/b/c/d.txt
> 1. 访问资源的命名机制
> 2. 存放资源的主机名
> 3. 资源自身的名称，由路径表示，注重强调于资源

---
> **URL**的三个组成部分  例子：www.baidu.com <br>
**是一种具体的URI，强调的是路径**

> 1. 协议
> 2. 存放资源的主机IP地址
> 3. 主机资源的具体地址<br>

## 17. HTTP的特点
1. 简单快速
2. 无连接：限制每次连接只处理一个请求，服务器处理完客户的请求会收到客户端的应答，然后才断开连接。这样可以节省传输的时间。
3. 无状态
---

## 18. get/post的区别
**get**：获取资源
> 1. 提交的数据：一般放在URL之后，用?分割，用&连接。
> 2. 提交数据的大小有限制， 服务器对url大小有限制
> 3. 通过Request.QueryString取得变量值 
> 4. 不安全

**post**：更新服务器上的资源
> 1. 提交的数据：放在http包的body当中。
> 2. 提交的数据大小无限制
> 3. 通过Request.Form取得变量值
> 4. 较安全

## 19. Cookie和Session的区别
**Cookie**：
1. Cookie技术是客户端的解决方案，是由服务器发给客户端的特殊信息，这些信息以文本的方式存放在客户端，客户端每次向服务器发送请求的时候会带上这些特殊信息。
2. 保存的时ASCII码字符串。
3. Cookie有可能被修改
4. 可以给Cookie设置很大的过期时间
5. 不占用服务端资源

**Session**：
1. Session是另一种保存客户端状态的机制，不同的是Cookie保存在客户端浏览器中，Session保存在服务器上，客户端浏览器访问服务器时，服务器把客户端信息以某种形式记录在服务器上。
2. Session可以存取任何类型的数据
3. 不存在敏感信息泄露风险
4. 依赖于id，若id设为-1， 关闭浏览器，Session就失效
5. 并发访问多时服务端压力大
